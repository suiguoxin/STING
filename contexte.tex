\chapter{Contexte}

\section{SNCF \& VSC Technologies}
\subsection{Groupe SNCF}
La Société nationale des chemins de fer français (SNCF) est l'entreprise ferroviaire publique française, officiellement créée le 1er janvier 1938 en application du décret-loi du 31 août 1937. Elle est notamment présente dans les domaines du transport de voyageurs, du transport de marchandises et réalise la gestion, l'exploitation et la maintenance du réseau ferré national dont elle est propriétaire.

La SNCF est composée de trois EPIC (fig.\ref{fig:sncf_epic}), mais elle possède de nombreuses filiales aussi bien de droit public que de droit privé qui forment le groupe SNCF.

\begin{figure}[ht]
\centering
\includegraphics[width=0.8\textwidth]{sncf_epic}
\caption{Epic SNCF}
\label{fig:sncf_epic}
\end{figure}

Depuis le 1er janvier 2015, la SNCF est constituée de trois établissements publics à caractère industriel et commercial (EPIC) : l'EPIC de tête « SNCF » chargé du pilotage stratégique du groupe, « SNCF Réseau » propriétaire et gestionnaire du réseau ferré national et « SNCF Mobilités » chargé de l'exploitation des trains4,5.

La SNCF est donc une entreprise ferroviaire « intégrée » : elle exerce à la fois le métier d'exploitant (voyageurs et marchandises) et celui de gestionnaire d'infrastructure ferroviaire.

La Société nationale des chemins de fer français est devenue un établissement public à caractère industriel et commercial en 19836, alors qu'elle était auparavant une société anonyme d'économie mixte.

En 2015, le réseau ferré national propriété de SNCF Réseau compte environ 30 000 km de lignes dont 15 687 km de lignes électrifiées et 2 024 km de lignes à grande vitesse7. La même année, les effectifs des trois EPIC étaient de 149 500 salariés.

Chaque jour, elle fait circuler 15 000 trains de fret et de voyageurs et transporte plus de cinq millions de voyageurs8. Par son volume d'activité et la taille de son réseau, c'est la troisième entreprise ferroviaire européenne, après la Deutsche Bahn et les chemins de fer russes.

Elle détient des participations majoritaires ou totales dans des sociétés de droit privé regroupées dans le groupe SNCF et dont la tutelle de l'État est exercée par la Direction générale des infrastructures, des transports et de la mer du ministère de l'écologie, du développement durable et de l'énergie.9 Le siège social de la SNCF se trouve à La Plaine St-Denis, 2 place aux étoiles, à côté de la gare Stade de France Saint-Denis du RER D.

En 2014, la SNCF a enregistré un résultat net de 605 millions d'euros (contre une perte nette de 180 millions d'euros en 2013). L'EPIC SNCF Mobilités a réalisé un chiffre d'affaires de 27,2 milliards d'euros10.

Le reste du groupe SNCF, qui a réalisé 7,1 milliards d'euros de chiffre d'affaires en 200911, intervient dans les domaines suivants : logistique et transport routier de marchandises, transport routier de voyageurs (Keolis), liaison maritime (SeaFrance), ingénierie (EFFIA, INEXIA, commerce en ligne (Voyages-sncf.com), billettique (RITMx). Le groupe possède aussi des participations dans des sociétés ferroviaire et gestionnaires d'infrastructure portuaire partagées avec d'autres partenaires comme Eurostar, Thalys, Elipsos, Lyria et Nuovo Trasporto Viaggiatori.

\clearpage

\subsection{LE GROUPE VSC \& Rail Europe}
Le Groupe VSC et Rail Europe, filiale du Groupe SNCF, dirigée par Franck Gervais, est un acteur majeur du tourisme, expert de la distribution du train mais aussi de la vente des billets d'avions, de séjours, location de voitures et chambres d'hôtel, en France et en Europe. En 2015, son volume d’affaires atteint 4,1 milliards d’euros, en recul de 1,4\% par rapport à 2015 en vendant 86 millions de voyages, en croissance de 4,4\%. L’innovation demeure un axe central et exprime la capacité de Voyages-sncf.com à répondre aux nouveaux usages de ses clients. Aujourd’hui, en France, Voyages-sncf.com est le premier site d’e-commerce et la première agence de voyages en ligne ; le groupe rassemble 1200 collaborateurs dans le monde dont 40\% à l'international (130 en Europe et 350 hors Europe).

\begin{figure}[ht]
\centering
\includegraphics[width=0.9\textwidth]{vsct}
\caption{VSC Technologies: Un mix}
\label{fig:vsct}
\end{figure}

En 2000, le site internet Voyages-sncf.com est lancé sur le périmètre France. L’entreprise est à l’époque le distributeur unique des billets de train SNCF, et a pour objectif de transformer son site en portail de voyages offrant des produits et services complémentaires au train. L’année suivante, Voyages-sncf.com forme une joint-venture avec l’américain Expedia et devient une agence de voyage globale. L’entreprise poursuit alors son développement en France, tout en nourrissant une ambition internationale.

Pour répondre aux enjeux de la distribution du voyage et aux nouveaux comportements d’achats, le groupe VSC offre à ses clients mondiaux un réseau puissant, souple et adapté à leurs besoins. Il couvre plus présent dans 11 pays européens et 45 dans le reste du monde via un total de 67 sites internet et mobiles, 4 boutiques et un service de call-center. Afin de répondre aux enjeux spécifiques du marché B2B, le site Voyages-sncf.eu a été lancé en Europe en 12 langues (hors France).
Le site recense plusieurs transporteurs tels que SNCF, TER, Eurostar, Thalys, TGV Lyria ; 3 compagnies de bus, 400 compagnies aériennes ; 280 000 hôtels référencés ; plus de 25 000 offres de séjours ; 30 loueurs de voitures, etc.

Le groupe va bientôt se nomer "oui.sncf".
\clearpage

\section{Usine Logicielle \& Katana} (à quoi ça sert NDL)
\subsection{Usine Logicielle}
\href{https://wiki.vsct.fr/pages/viewpage.action?spaceKey=KTN\&title=Usine+Logicielle+VSCT}{Usine Logicielle}
L'usine logicielle est l'ensemble de logiciels, d'outils et de procédures qui permettent de structurer et d'industrialiser les développements VSCT, ainsi que leur validation et déploiement sur l'infrastructure VSCT (hors VSCloud).

Dans sa définition actuelle: elle est la continuation de la Nouvelle usine logicielle Lille, et de Katana.

\begin{figure}[h]
\centering
\includegraphics[width=0.8\textwidth]{usine-logicielle-developpement}
\caption{Usine Logicielle: Développement}
\end{figure}

Le développeur édite ses sources sur son poste de travail et les versionne sous GIT, avec entreposage dans une forge GITLAB .

L'application fait elle-même l'objet de versions formalisées, avec les livrables individuels packagés et archivés sur un entrepôt de binaires ( NEXUS ).

Pour chaque application, plusieurs plateformes sont montées sur l'infrastructure pour installer l'application.

Chaque plateforme a un rôle défini. Les plateformes de production font l'objet d'une gestion spécifique, le plus souvent pilotée par les équipes d'exploitation.

Le développeur dispose d'un outillage d'intégration/déploiement continue ( JENKINS ) pour piloter les compilations/générations, validations, déploiements sur des plateforme intermédiaires...
Pour certaines de ces étapes, JENKINS pilote des outils-tiers ( FISHEYE , CRUCIBLE , CHECKMARX , SONAR , ...).

Les serveurs (virtuels ou non) des plateformes sont accessibles en ligne de commande SSH au travers d'un frontal WALLIX, en fonction des droits de chacun.

Un frontal web ( RUNDECK ) permet de mettre à disposition des utilisateurs des opérations de plus haut-niveau, en self-service web sur les serveurs/plateformes (ex: déploiement applicatif, reconfiguration applicative, arrêt/relance et autres opérations spécifiques sur les serveurs).

\begin{figure}[h]
\centering
\includegraphics[width=0.8\textwidth]{usine-logicielle-operation}
\caption{Usine Logicielle: Opération}
\end{figure}

La configuration détaillée des différentes plateformes de l'application est industrialisée par:
\begin{itemize}
  \item l'outil PUPPET (configuration technique - COTS) et un REFERENTIEL TECHNIQUE en infra-as-code
  \item l'outil HESPERIDES (configuration application - développement VSCT en open-source)
\end{itemize}

Sauf cas particulier, l'accès aux outils et aux plateformes se fait selon l'authentification Active Directory de l'utilisateur.
\subsection{Katana}

\href{https://wiki.vsct.fr/display/KTN/KATANA+Accueil}{Katana}
La solution Katana assure la configuration technique, le déploiement applicatif et autre tâches industrialisées sur les machines des infrastructures VSC(T) de Lille/St-Denis (DMZs hors-production, Assemblage, Perf, Partenaires, Rithmics, Technique, Production, SNB....), à l'exception notable des SIs du CNIT, de VSCloud, et des infra bigData....

Elle est composée :
\begin{itemize}
  \item D'un référentiel de données techniques sur les plateformes/machines sous forme infraAsCode (fichiers envYyaml pour les plateformes, fichiers de configuration Puppet)
  \item D'un référentiel des configurations applicatives: Hesperides (géré par sa propre communauté)
  \item D'un catalogue de scripts (bash/perl/groovy/...), issu des projets de déploiement VSCT, implantant les opérations de déploiement/contrôle/supervision/etc
  \item D'un orchestrateur de tâches en self-service, Rundeck, qui pilote les tâches du Puppet et du catalogue de script (en central, ou sur les machines) .Il peut être contrôlé soit manuellement (par son IHM web), soit par API REST.
\end{itemize}

Katana s'inscrit dans la Usine Logicielle VSCT. La solution s'intègre en particulier avec les outils:
\begin{itemize}
  \item Jenkins: peut piloter l'orchestrateur de tâches dans le cadre des processus d'intégration ou de déploiement continus
  \item Nexus: pour le stockage des livrables applicatifs et autres artefacts (en particulier la (lexique. \ref{lexi:delivery_note}), le catalogue de scripts, les projets rundeck....)
  \item GIT: pour le stockage et le versionnement des fichiers (code du catalogue de scripts, référentiels de données enYaml, fichiers de configuration Puppet, ...)
\end{itemize}
